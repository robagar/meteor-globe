(this["webpackJsonpmeteor-globe"]=this["webpackJsonpmeteor-globe"]||[]).push([[0],{103:function(e,t){},105:function(e,t){},114:function(e,t,n){"use strict";n.r(t);var r=n(7),a=n.n(r),i=n(63),c=n.n(i),s=(n(74),n(14)),o=n(8),u=n(16),l=n(117),b=n(119),h=6371.37;function j(e){return Math.PI*e/180}function f(e,t,n){var r=j(e),a=j(t),i=n+h;return[i*Math.cos(r)*Math.cos(-a),i*Math.sin(r),i*Math.cos(r)*Math.sin(-a)]}var d=n(116),p=n(118),m=n(69),x=n(19);Object(x.c)();var g=new m.a({highlightedMarker:"",markers:new Map([["UK003C",{identifier:"UK003C",latitude:50.224871,longitude:-4.949858,label:"UK003C"}]]),meteors:[]}),O=n(11);function v(e){var t=e.identifier,n=e.latitude,r=e.longitude,a=e.altitude,i=void 0===a?5:a,c=e.radius,s=void 0===c?5:c,o=e.label,u=e.labelSize,l=void 0===u?50:u,b=g.useState((function(e){return e.highlightedMarker}))===t,h=function(e){e?g.update((function(e){e.highlightedMarker=t})):g.update((function(e){e.highlightedMarker===t&&(e.highlightedMarker="")}))};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("mesh",{onPointerOver:function(e){return h(!0)},onPointerOut:function(e){return h(!1)},position:f(n,r,i),children:[Object(O.jsx)("sphereGeometry",{args:[4*s,8,8]}),Object(O.jsx)("meshBasicMaterial",{visible:!1})]}),Object(O.jsxs)("mesh",{position:f(n,r,i),children:[Object(O.jsx)("sphereGeometry",{args:[s,16,16]}),Object(O.jsx)("meshBasicMaterial",{color:"hotpink"})]}),o&&Object(O.jsx)(d.a,{visible:b,position:f(n,r,i+10),children:Object(O.jsx)(p.a,{anchorX:"left",anchorY:"top",fontSize:l,color:"white",children:o})})]})}function k(e){var t=e.beginLatitude,n=e.beginLongitude,r=e.beginHeight;return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("mesh",{position:f(t,n,r),children:[Object(O.jsx)("sphereGeometry",{args:[5,16,16]}),Object(O.jsx)("meshBasicMaterial",{color:"white"})]})})}function M(e){var t=e.markers,n=e.meteors,r={fov:75,near:10,far:1e5,position:f(52,0,5e3)},a=Object(l.a)({map:"/meteor-globe/textures/2_no_clouds_4k.jpeg",bumpMap:"/meteor-globe/textures/elev_bump_4k.jpeg",specularMap:"/meteor-globe/textures/water_4k.png"});return Object(O.jsxs)(u.a,{frameloop:"demand",camera:r,children:[Object(O.jsx)(b.a,{minDistance:6471.37}),Object(O.jsx)("ambientLight",{intensity:.1}),Object(O.jsx)("directionalLight",{color:"white",position:f(0,0,1)}),Object(O.jsxs)("mesh",{children:[Object(O.jsx)("sphereGeometry",{args:[h,128,128]}),Object(O.jsx)("meshPhongMaterial",Object(o.a)({},a))]}),t.map((function(e){return Object(O.jsx)(v,Object(o.a)({},e),"marker-".concat(e.identifier))})),n.map((function(e,t){return Object(O.jsx)(k,Object(o.a)({},e),"meteor-".concat(t))}))]})}n(80);var w=n(13),_=n.n(w),y=n(15),L=n(18),S=n(66),P=n.n(S);function B(){return(B=Object(L.a)(_.a.mark((function e(t){var n,r,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if(!(n=e.sent).ok){e.next=11;break}return e.next=6,n.text();case 6:return r=e.sent,a=P()(r,{columns:!0}),e.abrupt("return",a.map((function(e){return{identifier:e.camera_id,latitude:e.obs_latitude,longitude:e.obs_longitude}})));case 11:return e.abrupt("return",Promise.reject(n.statusText));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){(function(e){return B.apply(this,arguments)})("/meteor-globe/data/cameradetails.csv").then((function(e){console.info("[cameras]",e),g.update((function(t){var n,r=t.markers,a=Object(y.a)(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;r.set(i.identifier,Object(o.a)(Object(o.a)({},i),{},{label:i.identifier}))}}catch(c){a.e(c)}finally{a.f()}}))})).catch((function(e){console.error("[cameras] load failed",e)}))}var K=n(67),U=n(68);function C(){(function(e){var t,n,r,a,i,c;return _.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:t=!1,n=!1,s.prev=2,a=function(){var e=c.value;if(0===e.length)return"continue";if("\r"===e[0]&&(e=e.slice(1)),"#"===e[0])return"continue";var t=e.split(";"),n=function(e){var n=t[e];return n?n.trim():""},r=function(e){return parseFloat(n(e))},a=n(1),i=n(3),s=r(60),o=r(62),u=r(64),l=r(76),b=n(82);b.includes("UK")&&(console.info(a,i,s,o,u,l,b),g.update((function(e){e.meteors.push({beginLatitude:s,beginLongitude:o,beginHeight:u})})))},i=Object(K.a)(Object(U.a)(e));case 5:return s.next=7,_.a.awrap(i.next());case 7:if(!(t=!(c=s.sent).done)){s.next=14;break}if("continue"!==a()){s.next=11;break}return s.abrupt("continue",11);case 11:t=!1,s.next=5;break;case 14:s.next=20;break;case 16:s.prev=16,s.t0=s.catch(2),n=!0,r=s.t0;case 20:if(s.prev=20,s.prev=21,!t||null==i.return){s.next=25;break}return s.next=25,_.a.awrap(i.return());case 25:if(s.prev=25,!n){s.next=28;break}throw r;case 28:return s.finish(25);case 29:return s.finish(20);case 30:case"end":return s.stop()}}),null,null,[[2,16,20,30],[21,,25,29]],Promise)})("/meteor-globe/data/traj_summary_20210812_solrange_140.0-141.0.txt").catch((function(e){console.error("[meteors] load failed",e)}))}var E=function(){var e=g.useState((function(e){return e.markers})),t=g.useState((function(e){return e.meteors}));return Object(r.useEffect)(G,[]),Object(r.useEffect)(C,[]),Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(M,{markers:Object(s.a)(e.values()),meteors:t})})};c.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(a.a.Suspense,{fallback:Object(O.jsx)("div",{children:"Loading... "}),children:Object(O.jsx)(E,{})})}),document.getElementById("root"))},74:function(e,t,n){},80:function(e,t,n){}},[[114,1,2]]]);
//# sourceMappingURL=main.c693af7d.chunk.js.map