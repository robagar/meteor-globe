{"version":3,"sources":["theme.ts","settings.ts","constants.ts","store.ts","data/cameras.ts","data/showers.ts","data/stations.ts","data/meteors.ts","ui/AppMenu.tsx","3d/geometry.ts","format.ts","ui/MeteorInfo.tsx","data/GMN.ts","GMNProvider.tsx","ui/LoadDailyMeteorsDialog.tsx","ui/filter/ShowerFilter.tsx","ui/filter/MagnitudeFilter.tsx","ui/filter/StationPrefixFilter.tsx","ui/filter/StationFilter.tsx","ui/Filter.tsx","ui/Settings.tsx","ui/MeteorTooltip.tsx","3d/InstancedMeteors.tsx","3d/CameraControls.tsx","3d/Globe.tsx","App.tsx","index.tsx"],"names":["theme","createTheme","palette","mode","SETTINGS","DEFAULT_SETTINGS","showClouds","light","cityLights","highResolutionTextures","saveSettings","settings","localStorage","setItem","JSON","stringify","EARTH_RADIUS","MIN_MAGNITUDE","MAX_MAGNITUDE","DEFAULT_UP","DEFAULT_CAMERA_CONTROL","target","up","minDistance","maxDistance","CITY_LIGHTS_COLOR","Color","BLACK","enableMapSet","store","Store","highlightedMarker","markers","Map","identifier","latitude","longitude","label","loading","meteorDataInfo","url","title","meteors","selectedMeteor","undefined","activeShowers","stationsByCode","stations","filter","showers","magnitude","min","max","codes","prefixes","cameraControl","s","getItem","parse","e","console","error","loadSettings","a","fetch","response","ok","text","csv","records","columns","map","r","camera_id","obs_latitude","obs_longitude","Promise","reject","statusText","initCameras","loadCameras","then","cameras","update","m","c","set","catch","require","showersByCode","code","SPORADIC_CODE","SPORADIC","name","numMeteors","getShower","get","u","isSporadic","shower","buildActiveShowers","meteor","activeShower","push","values","sort","b","length","initStations","activeStationCodes","Set","stationCodes","has","add","localeCompare","info","METEORS_YESTERDAY","METEORS_LATEST_DAILY","fetchMeteorData","async","nextIndex","line","slice","fields","split","i","f","trim","parseFloat","beginTime","showerCode","begin","height","end","averageSpeed","duration","peakHeight","mass","index","fetchline","AppMenu","props","anchorEl","open","onClose","onLoadMeteors","showLoadDailyDialog","resetView","Menu","MenuItem","onClick","Divider","radians","degrees","Math","PI","position","altitude","localUp","x","y","z","xyz","point","lat","long","cos","sin","toDateTime","DateTime","fromISO","replace","zone","formatDateTime","toLocaleString","DATETIME_MED_WITH_SECONDS","heightFormatter","Intl","NumberFormat","maximumFractionDigits","formatLatLongHt","p","formatAngle","h","format","degreesFormatter","angle","positiveSuffix","negativeSuffix","abs","suffix","speedFormatter","formatSpeed","speed","MeteorInfo","focusMeteor","Box","className","sx","px","pb","Stack","direction","justifyContent","alignItems","Tooltip","IconButton","join","URL_BASE","DAILY_URL_REGEX","GMN","_dailyFileNamesByDate","_dailyInitialized","filename","date","d","toFormat","this","Error","DATE_FULL","dailyMeteorsUrl","ms","matchAll","groups","Context","createContext","GMNProvider","children","contextValue","gmn","useConstant","Provider","value","useGMN","useContext","LoadDailyMeteorsDialog","useState","dailyInitialized","availablityInitialized","setAvailablityInitialized","useAsyncEffect","initDailyMeteorsAvailable","setDate","DailyMeteorsDatePicker","DatePicker","onChange","renderInput","params","TextField","inputFormat","shouldDisableDate","now","dailyMeteorsAvailable","Dialog","DialogTitle","DialogContent","Skeleton","DialogActions","Button","disabled","ShowerFilter","filterShowers","FormControl","width","InputLabel","id","Select","labelId","multiple","includes","input","OutlinedInput","renderValue","selected","event","MenuProps","Checkbox","checked","ListItemText","formatter","autoFocus","PaperProps","style","maxHeight","ITEM_HEIGHT","MagnitudeFilter","my","Slider","valueLabelDisplay","step","marks","valueUnless","unless","StationPrefixFilter","toUpperCase","rawPrefixes","filtered","prefix","station","startsWith","StationFilter","Filter","Toolbar","Typography","variant","Settings","FormControlLabel","control","Switch","MeteorTooltip","DEFAULT_COLOR","HIGHLIGHTED_COLOR","SELECTED_COLOR","BATCH_SIZE","ZERO_MATRIX","Matrix4","InstancedMeteors","data","selectMeteor","filteredMeteors","ref","useRef","useFrame","camera","meshes","current","j","mesh","setMatrixAt","buildMeteorMatrix","color","hover","setColorAt","instanceMatrix","needsUpdate","instanceColor","setHover","invalidate","useThree","lastFilterMeteorsRef","renderBatch","batch","offset","args","instanceId","stopPropagation","onDoubleClick","onPointerOver","onPointerOut","vertexShader","fragmentShader","transparent","depthWrite","Html","calculatePosition","el","size","parent","InstancedMesh","getMatrixAt","objectPos","v1","setFromMatrixPosition","project","widthHalf","heightHalf","calculateTooltipPosition","batches","n","numBatches","ceil","Vector3","cameraPosition","brightness","tail","head","tx","ty","tz","center","cx","cy","cz","vector","clone","normalize","view","sub","perp","cross","right","rotation","xAxis","yAxis","zAxis","makeBasis","quaternion","Quaternion","setFromRotationMatrix","scale","compose","CAMERA_CONFIG","fov","near","far","CameraControls","createRef","state","v","vector3EqualsXYZ","reset","updateProjectionMatrix","OrbitControls","zoomSpeed","rotateSpeed","Globe","setCameraControl","material","useTexture","bumpMap","specularMap","emissiveMap","chooseTextures","clouds","frameloop","intensity","visible","emissive","alphaMap","LuxonSettings","defaultZone","queryParams","URLSearchParams","window","location","search","App","setError","useCallback","focusedMeteorCameraControl","useEffect","tryLoadMeteors","loadMeteors","test","meteorDataInfoFromParams","filterVisible","setFilterVisible","meteorVisibility","some","filterMeteors","settingsVisible","setSettingsVisible","subscribe","Header","numVisibleMeteors","menuVisible","setMenuVisible","menuAnchorEl","setMenuAnchorEl","loadDailyMeteorsDialogOpen","setLoadDailyMeteorsDialogOpen","AppBar","boxShadow","display","flexGrow","currentTarget","titleSuffix","dailyMeteorsInfo","LocalizationProvider","dateAdapter","DateAdapter","Snackbar","Alert","severity","flexFlow","flex","focus","bottom","Footer","Drawer","anchor","align","Date","getFullYear","Link","href","rel","ReactDOM","render","StrictMode","ThemeProvider","CssBaseline","Suspense","fallback","document","getElementById"],"mappings":"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","file":"static/js/main.86c28ae7.chunk.js","sourcesContent":["import { createTheme } from \"@mui/material/styles\";\n\nconst theme = createTheme({\n  palette: {\n    mode: \"dark\",\n  },\n});\n\nexport default theme;\n","import { SettingsData } from \"./interfaces\";\n\nconst SETTINGS = \"settings\";\n\nconst DEFAULT_SETTINGS = {\n  showClouds: true,\n  light: true,\n  cityLights: false,\n  highResolutionTextures: true,\n};\n\nexport function saveSettings(settings: SettingsData) {\n  localStorage.setItem(SETTINGS, JSON.stringify(settings));\n}\n\nexport function loadSettings(): SettingsData {\n  try {\n    const s = localStorage.getItem(SETTINGS);\n    if (s) return JSON.parse(s);\n  } catch (e) {\n    console.error(\"[settings] load failed\", e);\n  }\n  return DEFAULT_SETTINGS;\n}\n","import { Color } from \"three\";\nimport { XYZ, Km, Magnitude, CameraControlData } from \"./interfaces\";\n\nexport const EARTH_RADIUS: Km = 6371.37;\n\nexport const MIN_MAGNITUDE: Magnitude = -10;\nexport const MAX_MAGNITUDE: Magnitude = 10;\n\nconst MIN_CAMERA_HEIGHT: Km = 200;\nconst MAX_CAMERA_HEIGHT: Km = 10000;\n\nexport const DEFAULT_UP: XYZ = [0, 1, 0];\n\nexport const DEFAULT_CAMERA_CONTROL: CameraControlData = {\n  target: [0, 0, 0],\n  up: DEFAULT_UP,\n  minDistance: EARTH_RADIUS + MIN_CAMERA_HEIGHT,\n  maxDistance: EARTH_RADIUS + MAX_CAMERA_HEIGHT,\n};\n\nexport const CLOUD_HEIGHT = 10;\n\nexport const CITY_LIGHTS_COLOR = new Color(0xffff80);\nexport const BLACK = new Color(0x000000);\nexport const AMBIENT_LIGHT_INTENSITY = 0.075;\n","import { Store } from \"pullstate\";\nimport { enableMapSet } from \"immer\";\n\nimport { MarkerProps } from \"./3d/Marker\";\nimport { AppState, StationData, StationCode } from \"./interfaces\";\nimport { loadSettings } from \"./settings\";\nimport { DEFAULT_CAMERA_CONTROL } from \"./constants\";\n\nenableMapSet();\n\nexport const store = new Store<AppState>({\n  highlightedMarker: \"\",\n  markers: new Map<string, MarkerProps>([\n    [\n      \"UK003C\",\n      {\n        identifier: \"UK003C\",\n        latitude: 50.224871,\n        longitude: -4.949858,\n        label: \"UK003C\",\n      },\n    ],\n  ]),\n  loading: true,\n  meteorDataInfo: {\n    url: \"\",\n    title: \"\",\n  },\n  meteors: [],\n  selectedMeteor: undefined,\n  activeShowers: [],\n  stationsByCode: new Map<StationCode, StationData>(),\n  stations: [],\n  filter: {\n    showers: [],\n    magnitude: { min: undefined, max: undefined },\n    stations: {\n      codes: [],\n      prefixes: \"\",\n    },\n  },\n  cameraControl: DEFAULT_CAMERA_CONTROL,\n  settings: loadSettings(),\n});\n","import parse from \"csv-parse/lib/sync\";\nimport { Degrees } from \"../interfaces\";\nimport { store } from \"../store\";\n\nexport interface CameraData {\n  identifier: string;\n  latitude: Degrees;\n  longitude: Degrees;\n}\n\nexport async function loadCameras(url: string): Promise<CameraData[]> {\n  const response = await fetch(url);\n  if (response.ok) {\n    const csv = await response.text();\n    // console.info(\"cameras csv\", csv);\n\n    const records = parse(csv, { columns: true });\n    return records.map((r: any) => ({\n      identifier: r.camera_id,\n      latitude: r.obs_latitude,\n      longitude: r.obs_longitude,\n    }));\n  } else return Promise.reject(response.statusText);\n}\n\nexport function initCameras() {\n  loadCameras(\"/meteor-globe/data/cameradetails.csv\")\n    .then((cameras) => {\n      // console.info(\"[cameras]\", cameras);\n      store.update((s) => {\n        const m = s.markers;\n        for (const c of cameras) {\n          m.set(c.identifier, { ...c, label: c.identifier });\n        }\n      });\n    })\n    .catch((e) => {\n      console.error(\"[cameras] load failed\", e);\n    });\n}\n","import { MeteorData, ShowerData, ActiveShowerData } from \"../interfaces\";\n\nconst showers = require(\"./showers.json\");\nconst showersByCode = new Map<string, ShowerData>();\nfor (const s of showers) {\n  // console.info(s);\n  showersByCode.set(s.code, s);\n}\n\nconst SPORADIC_CODE = \"...\";\nconst SPORADIC = {\n  code: SPORADIC_CODE,\n  name: \"(sporadic)\",\n  numMeteors: 0,\n};\n\nexport function getShower(code: string): ShowerData {\n  if (code === SPORADIC_CODE) return SPORADIC;\n\n  const s = showersByCode.get(code);\n  if (s) return s;\n\n  // not in IAU list\n  const u = {\n    code,\n    name: \"(unknown)\",\n  };\n  showersByCode.set(code, u);\n  return u;\n}\n\nexport function isSporadic(shower: ShowerData) {\n  return shower.code === SPORADIC_CODE;\n}\n\nexport function buildActiveShowers(meteors: MeteorData[]): ActiveShowerData[] {\n  const map = new Map<ShowerData, ActiveShowerData>();\n\n  for (const meteor of meteors) {\n    const { shower } = meteor;\n    const activeShower = map.get(shower);\n    if (activeShower) {\n      activeShower.meteors.push(meteor);\n    } else {\n      map.set(shower, {\n        shower,\n        meteors: [meteor],\n      });\n    }\n  }\n\n  const activeShowers = [...map.values()];\n  activeShowers.sort((a, b) => b.meteors.length - a.meteors.length);\n  return activeShowers;\n}\n","import { StationCode, StationData, MeteorData } from \"../interfaces\";\n\nexport function initStations(\n  meteors: MeteorData[],\n  stationsByCode: Map<string, StationData>\n): StationData[] {\n  const activeStationCodes = new Set<StationCode>();\n  for (const m of meteors) {\n    for (const code of m.stationCodes) {\n      if (!stationsByCode.has(code)) {\n        stationsByCode.set(code, { code });\n      }\n      activeStationCodes.add(code);\n    }\n  }\n\n  const stations: StationData[] = [];\n  for (const c of activeStationCodes) {\n    stations.push(stationsByCode.get(c)!);\n  }\n  stations.sort((a, b) => a.code.localeCompare(b.code));\n  console.info(\"[stations]\", stations.length);\n  return stations;\n}\n","import fetchline from \"fetchline\";\n\nimport { store } from \"../store\";\nimport { MeteorDataInfo, MeteorData, FilterData } from \"../interfaces\";\nimport { getShower, buildActiveShowers } from \"./showers\";\nimport { initStations } from \"./stations\";\n\nexport const DEFAULT_COLOR = [1, 1, 1];\nexport const HIGHLIGHTED_COLOR = [1.0, 0.27, 0.71]; // CSS hotpink #FF69B4\n\nexport const METEORS_YESTERDAY = {\n  url: \"https://globalmeteornetwork.org/data/traj_summary_data/daily/traj_summary_yesterday.txt\",\n  title: \"Yesterday\",\n};\n\nexport const METEORS_LATEST_DAILY = {\n  url: \"https://globalmeteornetwork.org/data/traj_summary_data/daily/traj_summary_latest_daily.txt\",\n  title: \"Latest Daily\",\n};\n\nexport function meteorDataInfoFromParams(\n  params: URLSearchParams\n): MeteorDataInfo {\n  const test = params.get(\"test\");\n  if (test !== null) {\n    switch (test) {\n      case \"one_perseid\":\n        return {\n          url: \"/meteor-globe/data/one_perseid.txt\",\n          title: \"Test - One Perseid\",\n        };\n      default:\n        return {\n          url: \"/meteor-globe/data/traj_summary_20210812_solrange_140.0-141.0.txt\",\n          title: \"Test - Lots of Perseids\",\n        };\n    }\n  }\n\n  // default to all detected by GMN yesterday\n  return METEORS_YESTERDAY;\n}\n\nexport async function loadMeteors(info: MeteorDataInfo) {\n  console.info(\"[meteors] LOAD\", info.title, info.url);\n\n  store.update((s) => {\n    s.meteorDataInfo = info;\n    s.loading = true;\n    s.selectedMeteor = undefined;\n    s.meteors = [];\n    s.activeShowers = [];\n  });\n\n  try {\n    const meteors = await fetchMeteorData(info.url);\n    const activeShowers = buildActiveShowers(meteors);\n    store.update((s) => {\n      s.loading = false;\n      s.meteors = meteors;\n      s.activeShowers = activeShowers;\n      s.stations = initStations(meteors, s.stationsByCode);\n\n      s.filter.showers = activeShowers.map((a) => a.shower);\n      s.filter.stations.codes = s.stations.map((s) => s.code);\n    });\n  } finally {\n    store.update((s) => {\n      s.loading = false;\n    });\n  }\n}\n\n// column indices\n// const BEGIN_UTC_TIME = 1;\n// const IAU_CODE = 3;\n// const AVERAGE_SPEED = 58;\n// const BEGIN_LATITUDE = 60;\n// const BEGIN_LONGITUDE = 62;\n// const BEGIN_HEIGHT = 64;\n// const END_LATITUDE = 66;\n// const END_LONGITUDE = 68;\n// const END_HEIGHT = 70;\n// const DURATION = 72;\n// const MAGNITUDE = 73;\n// const PEAK_HEIGHT = 74;\n// const MASS = 76;\n// const STATION_CODES = 82;\n\n// const NUM_COLUMNS = 83;\n\nconst BEGIN_UTC_TIME = 1;\nconst IAU_CODE = 3;\nconst AVERAGE_SPEED = 60;\nconst BEGIN_LATITUDE = 62;\nconst BEGIN_LONGITUDE = 64;\nconst BEGIN_HEIGHT = 66;\nconst END_LATITUDE = 68;\nconst END_LONGITUDE = 70;\nconst END_HEIGHT = 72;\nconst DURATION = 74;\nconst MAGNITUDE = 75;\nconst PEAK_HEIGHT = 76;\nconst MASS = 78;\nconst STATION_CODES = 84;\n\nconst NUM_COLUMNS = 85;\n\nasync function fetchMeteorData(url: string): Promise<MeteorData[]> {\n  const meteors: MeteorData[] = [];\n  let nextIndex = 0;\n  for await (let line of fetchline(url)) {\n    if (line.length === 0) continue;\n    if (line[0] === \"\\r\") line = line.slice(1); // fetchline bug?\n    if (line[0] === \"#\") continue; // comment, probably column headers\n\n    const fields = line.split(\";\");\n    if (fields.length !== NUM_COLUMNS) continue;\n\n    const s = (i: number): string => {\n      const f = fields[i];\n      return f ? f.trim() : \"\";\n    };\n\n    const f = (i: number): number => {\n      return parseFloat(s(i));\n    };\n\n    const beginTime = s(BEGIN_UTC_TIME);\n    const showerCode = s(IAU_CODE);\n    const begin = {\n      latitude: f(BEGIN_LATITUDE),\n      longitude: f(BEGIN_LONGITUDE),\n      height: f(BEGIN_HEIGHT),\n    };\n    const end = {\n      latitude: f(END_LATITUDE),\n      longitude: f(END_LONGITUDE),\n      height: f(END_HEIGHT),\n    };\n    const averageSpeed = f(AVERAGE_SPEED);\n    const duration = f(DURATION);\n    const magnitude = f(MAGNITUDE);\n    const peakHeight = f(PEAK_HEIGHT);\n    const mass = f(MASS);\n    const stationCodes = s(STATION_CODES).split(\",\");\n\n    const shower = getShower(showerCode);\n    meteors.push({\n      index: nextIndex++,\n      beginTime,\n      shower,\n      begin,\n      end,\n      peakHeight,\n      magnitude,\n      duration,\n      mass,\n      averageSpeed,\n      stationCodes,\n    });\n  }\n\n  return meteors;\n}\n\nexport function filterMeteors(\n  filter: FilterData,\n  meteors: MeteorData[]\n): boolean[] {\n  return meteors.map((m) => {\n    const { shower, magnitude, stationCodes } = m;\n\n    // by shower\n    if (!filter.showers.includes(shower)) return false;\n\n    // by magnitude\n    const { min, max } = filter.magnitude;\n    if (min !== undefined && magnitude < min) return false;\n    if (max !== undefined && magnitude > max) return false;\n\n    // by station code\n    if (!stationCodes.some((c) => filter.stations.codes.includes(c)))\n      return false;\n\n    return true;\n  });\n}\n","import { Menu, MenuItem, Divider } from \"@mui/material\";\n\nimport { MeteorDataInfo } from \"../interfaces\";\nimport { METEORS_YESTERDAY, METEORS_LATEST_DAILY } from \"../data/meteors\";\n\ninterface Props {\n  anchorEl: HTMLElement | null;\n  open: boolean;\n  onClose: () => void;\n  onLoadMeteors: (info: MeteorDataInfo) => void;\n  showLoadDailyDialog: () => void;\n  resetView: () => void;\n}\n\nexport function AppMenu(props: Props) {\n  const {\n    anchorEl,\n    open,\n    onClose,\n    onLoadMeteors,\n    showLoadDailyDialog,\n    resetView,\n  } = props;\n\n  return (\n    <Menu open={open} onClose={onClose} anchorEl={anchorEl}>\n      <MenuItem\n        onClick={() => {\n          onLoadMeteors(METEORS_YESTERDAY);\n        }}\n      >\n        {METEORS_YESTERDAY.title}\n      </MenuItem>\n      <MenuItem\n        onClick={() => {\n          onLoadMeteors(METEORS_LATEST_DAILY);\n        }}\n      >\n        {METEORS_LATEST_DAILY.title}\n      </MenuItem>\n      <MenuItem onClick={showLoadDailyDialog}>Daily...</MenuItem>\n      <Divider />\n      <MenuItem onClick={resetView}>Reset view</MenuItem>\n    </Menu>\n  );\n}\n","import { Vector3 } from \"three\";\nimport { Degrees, Radians, Km, XYZ, LatLongHt } from \"../interfaces\";\nimport { EARTH_RADIUS } from \"../constants\";\n\nexport function radians(degrees: Degrees): Radians {\n  return (Math.PI * degrees) / 180;\n}\n\nexport function position(\n  latitude: Degrees,\n  longitude: Degrees,\n  altitude: Km\n): XYZ {\n  const [x, y, z] = localUp(latitude, longitude);\n  const r = altitude + EARTH_RADIUS;\n  return [r * x, r * y, r * z];\n}\n\nexport function xyz(point: LatLongHt): XYZ {\n  const { latitude, longitude, height } = point;\n  const lat = radians(latitude);\n  const long = radians(longitude);\n  const r = EARTH_RADIUS + height;\n  const x = r * Math.cos(lat) * Math.cos(-long);\n  const y = r * Math.sin(lat);\n  const z = r * Math.cos(lat) * Math.sin(-long);\n  return [x, y, z];\n}\n\nexport function localUp(latitude: Degrees, longitude: Degrees): XYZ {\n  const lat = radians(latitude);\n  const long = radians(longitude);\n  const x = Math.cos(lat) * Math.cos(-long);\n  const y = Math.sin(lat);\n  const z = Math.cos(lat) * Math.sin(-long);\n  return [x, y, z];\n}\n\nexport function vector3EqualsXYZ(v: Vector3, xyz: XYZ): boolean {\n  const [x, y, z] = xyz;\n  return v.x === x && v.y === y && v.z === z;\n}\n","import { DateTime } from \"luxon\";\nimport { sexagesimal } from \"astronomia\";\n\nimport { radians } from \"./3d/geometry\";\nimport { LatLongHt, Degrees, Kms } from \"./interfaces\";\n\nfunction toDateTime(s: string): DateTime {\n  return DateTime.fromISO(s.replace(\" \", \"T\"), {\n    zone: \"UTC\",\n  });\n}\n\nexport function formatDateTime(s: string) {\n  const t = toDateTime(s);\n  return t.toLocaleString(DateTime.DATETIME_MED_WITH_SECONDS) + \" UTC\";\n}\n\nexport function formatDateTimeRange(from: string, to: string) {\n  const f = toDateTime(from).toLocaleString(DateTime.DATETIME_MED_WITH_SECONDS);\n  const t = toDateTime(to).toLocaleString(DateTime.TIME_WITH_SECONDS);\n  return `${f} → ${t} UTC`;\n}\n\nconst heightFormatter = new Intl.NumberFormat(undefined, {\n  maximumFractionDigits: 1,\n});\n\nexport function formatLatLongHt(p: LatLongHt): string {\n  const lat = formatAngle(p.latitude, \"N\", \"S\");\n  const long = formatAngle(p.longitude, \"E\", \"W\");\n  const h = heightFormatter.format(p.height);\n  return `${lat} ${long}, ${h}km`;\n}\n\nexport function formatAngleDMS(\n  angle: Degrees,\n  positiveSuffix: string,\n  negativeSuffix: string,\n  precision: number = 2\n) {\n  const a = new sexagesimal.Angle(Math.abs(radians(angle)));\n  const suffix = angle >= 0 ? positiveSuffix : negativeSuffix;\n  return `${a.toString(precision)}${suffix}`;\n}\n\nconst degreesFormatter = new Intl.NumberFormat(undefined, {\n  maximumFractionDigits: 2,\n});\n\nexport function formatAngle(\n  angle: Degrees,\n  positiveSuffix: string,\n  negativeSuffix: string\n) {\n  const a = degreesFormatter.format(Math.abs(angle));\n  const suffix = angle >= 0 ? positiveSuffix : negativeSuffix;\n  return `${a}${suffix}`;\n}\n\nconst speedFormatter = new Intl.NumberFormat(undefined, {\n  maximumFractionDigits: 0,\n});\n\nexport function formatSpeed(speed: Kms): string {\n  const s = speedFormatter.format(speed);\n  return `${s}kms⁻¹`;\n}\n","import { Box, Stack, IconButton, Tooltip } from \"@mui/material\";\nimport CenterFocusStrongRoundedIcon from \"@mui/icons-material/CenterFocusStrongRounded\";\n\nimport { MeteorData } from \"../interfaces\";\nimport { isSporadic } from \"../data/showers\";\nimport { formatDateTime, formatLatLongHt, formatSpeed } from \"../format\";\n\nimport \"./MeteorInfo.css\";\n\nexport interface MeteorInfoProps {\n  meteor: MeteorData;\n  focusMeteor: () => void;\n}\n\nexport function MeteorInfo(props: MeteorInfoProps) {\n  const { meteor, focusMeteor } = props;\n  const {\n    shower,\n    beginTime,\n    begin,\n    end,\n    magnitude,\n    duration,\n    averageSpeed,\n    stationCodes,\n  } = meteor;\n\n  return (\n    <Box className=\"meteorInfo\" sx={{ px: 1, pb: 1 }}>\n      <Stack\n        direction=\"row\"\n        sx={{ justifyContent: \"space-between\", alignItems: \"center\" }}\n      >\n        <div>\n          {!isSporadic(shower) && (\n            <span className=\"showerCode\">\n              {shower.code}\n              {\" — \"}\n            </span>\n          )}\n          <span className=\"showerName\">{shower.name}</span>\n        </div>\n        <Tooltip title=\"Focus view on this meteor\">\n          <IconButton\n            onClick={() => {\n              focusMeteor();\n            }}\n          >\n            <CenterFocusStrongRoundedIcon />\n          </IconButton>\n        </Tooltip>\n      </Stack>\n      <div className=\"beginTime\">{formatDateTime(beginTime)}</div>\n      <div className=\"meteorDetails\">\n        {formatLatLongHt(begin)} → {formatLatLongHt(end)}\n      </div>\n      <table className=\"meteorDetails\">\n        <tbody>\n          <tr>\n            <th>Magnitude</th>\n            <td>{magnitude}</td>\n          </tr>\n          <tr>\n            <th>Duration</th>\n            <td>{duration}s</td>\n          </tr>\n          <tr>\n            <th>Average speed</th>\n            <td>{formatSpeed(averageSpeed)}</td>\n          </tr>\n        </tbody>\n      </table>\n      <div className=\"stationCodes\">{stationCodes.join(\", \")}</div>\n    </Box>\n  );\n}\n","import { DateTime } from \"luxon\";\n// import { base, julian, solar } from \"astronomia\";\nimport { MeteorDataInfo } from \"../interfaces\";\n\nconst URL_BASE = \"https://globalmeteornetwork.org/data/traj_summary_data/\";\n\n// const GMN_EARLIEST_DATE = DateTime.fromISO(\"2020-09-18\").toJSDate();\n\nconst DAILY_URL_REGEX =\n  /<a href=\"(?<filename>traj_summary_(?<date>\\d{8})_solrange_(?<solarLongitudeFrom>\\d{3}.\\d)-(?<solarLongitudeTo>\\d{3}.\\d).txt)\">/g;\n\nexport class GMN {\n  url(filename: string) {\n    return URL_BASE + filename;\n  }\n\n  dailyMeteorsUrl(date: DateTime) {\n    // const jde = julian.DateToJDE(date.toJSDate());\n    // const c = base.J2000Century(jde);\n    // const { lon } = solar.true2000(c);\n    // const l = Math.ceil((180 * lon) / Math.PI);\n    // const d = date.toFormat(\"yyyyMMdd\");\n    // const f = `daily/traj_summary_${d}_solrange_${l}.0-${l + 1}.0.txt`;\n    // console.info(date, jde, c, lon);\n    // console.info(d, l, f);\n\n    const d = date.toFormat(\"yyyyMMdd\");\n    const f = this._dailyFileNamesByDate.get(d);\n    if (f) return this.url(`daily/${f}`);\n    throw Error(`No daily data available for ${date}`);\n  }\n\n  dailyMeteorsInfo(date: DateTime): MeteorDataInfo {\n    return {\n      title: \"Daily \" + date.toLocaleString(DateTime.DATE_FULL),\n      url: this.dailyMeteorsUrl(date),\n    };\n  }\n\n  private _dailyFileNamesByDate = new Map<string, string>();\n  private _dailyInitialized = false;\n\n  get dailyInitialized() {\n    return this._dailyInitialized;\n  }\n\n  async initDailyMeteorsAvailable() {\n    if (!this._dailyInitialized) {\n      try {\n        const r = await fetch(URL_BASE + \"daily/\");\n        if (r.ok) {\n          const s = await r.text();\n          const ms = s.matchAll(DAILY_URL_REGEX);\n          for (const m of ms) {\n            if (m.groups) {\n              const date = m.groups[\"date\"];\n              const filename = m.groups[\"filename\"];\n              console.info(date, filename);\n              this._dailyFileNamesByDate.set(date, filename);\n            }\n          }\n        }\n      } catch (e) {\n        console.error(e);\n      } finally {\n        this._dailyInitialized = true;\n      }\n    }\n  }\n\n  dailyMeteorsAvailable(date: DateTime): boolean {\n    const d = date.toFormat(\"yyyyMMdd\");\n    return this._dailyFileNamesByDate.has(d);\n  }\n}\n","import { createContext, useContext } from \"react\";\nimport useConstant from \"use-constant\";\n\nimport { GMN } from \"./data/GMN\";\n\nexport interface GMNContext {\n  gmn: GMN;\n}\n\nconst Context = createContext<GMNContext | null>(null);\n\nexport function GMNProvider({ children }) {\n  const gmn = useConstant(() => new GMN());\n\n  const contextValue = { gmn };\n\n  return <Context.Provider value={contextValue}>{children}</Context.Provider>;\n}\n\nexport function useGMN(): GMNContext {\n  const c = useContext(Context);\n  if (c) return c;\n  throw Error(\"useGMN used outside GMNProvider\");\n}\n","import { useState } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  TextField,\n  Skeleton,\n} from \"@mui/material\";\nimport { DatePicker } from \"@mui/lab\";\nimport { DateTime } from \"luxon\";\nimport useAsyncEffect from \"use-async-effect\";\n\nimport { useGMN } from \"../GMNProvider\";\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  onLoadMeteors: (date: DateTime) => void;\n}\n\nexport function LoadDailyMeteorsDialog(props: Props) {\n  const { open, onClose, onLoadMeteors } = props;\n\n  const { gmn } = useGMN();\n  const [availablityInitialized, setAvailablityInitialized] = useState(\n    gmn.dailyInitialized\n  );\n  useAsyncEffect(async () => {\n    if (open && !availablityInitialized) {\n      await gmn.initDailyMeteorsAvailable();\n      setAvailablityInitialized(true);\n    }\n  });\n\n  const [date, setDate] = useState<DateTime | null>(null);\n  // const today = DateTime.now();\n\n  const DailyMeteorsDatePicker = () => {\n    return (\n      <DatePicker\n        label=\"dd/mm/yyyy\"\n        value={date}\n        onChange={setDate}\n        renderInput={(params) => <TextField {...params} />}\n        inputFormat=\"dd/MM/yyyy\"\n        shouldDisableDate={(date) =>\n          date > DateTime.now() || !gmn.dailyMeteorsAvailable(date)\n        }\n      />\n    );\n  };\n\n  return (\n    <Dialog open={open} onClose={onClose}>\n      <DialogTitle>Load Daily Meteors</DialogTitle>\n      <DialogContent>\n        {!availablityInitialized && (\n          <Skeleton>\n            <DailyMeteorsDatePicker />\n          </Skeleton>\n        )}\n        {availablityInitialized && <DailyMeteorsDatePicker />}\n      </DialogContent>\n      <DialogActions>\n        <Button\n          disabled={date === null}\n          onClick={() => {\n            console.info(date);\n            if (date) onLoadMeteors(date);\n          }}\n        >\n          Load\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import {\n  FormControl,\n  Stack,\n  Button,\n  InputLabel,\n  Select,\n  SelectChangeEvent,\n  OutlinedInput,\n  MenuItem,\n  Checkbox,\n  ListItemText,\n} from \"@mui/material\";\n\nimport { ActiveShowerData } from \"../../interfaces\";\nimport { store } from \"../../store\";\nimport { formatter } from \"../../App\";\n\nexport function ShowerFilter() {\n  const activeShowers = store.useState((s) => s.activeShowers);\n  const filterShowers = store.useState((s) => s.filter.showers);\n\n  return (\n    <>\n      <FormControl sx={{ m: 1, width: 280 }}>\n        <InputLabel id=\"showers-label\">Showers</InputLabel>\n        <Select\n          labelId=\"showers-label\"\n          multiple\n          value={activeShowers.filter((s) => filterShowers.includes(s.shower))}\n          input={<OutlinedInput label=\"Showers\" />}\n          renderValue={(selected) => {\n            if (selected.length === 0) return \"(none)\";\n            const ss = [...selected];\n            const names = ss.map((s) => s.shower.name);\n            return names.join(\", \");\n          }}\n          onChange={(event: SelectChangeEvent<ActiveShowerData[]>) => {\n            const { value } = event.target;\n            if (typeof value === \"string\") return;\n            store.update((s) => {\n              s.filter.showers = value.map((s) => s.shower);\n            });\n          }}\n          MenuProps={MenuProps}\n        >\n          {activeShowers.map((s) => (\n            <MenuItem key={s.shower.code} value={s as any}>\n              <Checkbox checked={filterShowers.includes(s.shower)} />\n              <ListItemText>\n                {s.shower.name}\n                {\" (\"}\n                {formatter.format(s.meteors.length)}\n                {\")\"}\n              </ListItemText>\n            </MenuItem>\n          ))}\n        </Select>\n      </FormControl>\n      <Stack direction=\"row\">\n        <Button\n          onClick={() => {\n            store.update((s) => {\n              s.filter.showers = activeShowers.map((s) => s.shower);\n            });\n          }}\n        >\n          all\n        </Button>\n        <Button\n          onClick={() => {\n            store.update((s) => {\n              s.filter.showers = [];\n            });\n          }}\n        >\n          none\n        </Button>\n      </Stack>\n    </>\n  );\n}\n\nconst ITEM_HEIGHT = 54;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  autoFocus: false, // kludge to stop initial scoll to end\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 6.5 + ITEM_PADDING_TOP,\n      width: 280,\n    },\n  },\n};\n","import { Box, Slider } from \"@mui/material\";\n\nimport { Magnitude } from \"../../interfaces\";\nimport { MIN_MAGNITUDE, MAX_MAGNITUDE } from \"../../constants\";\nimport { store } from \"../../store\";\n\nexport function MagnitudeFilter() {\n  const { min = MIN_MAGNITUDE, max = MAX_MAGNITUDE } = store.useState(\n    (s) => s.filter.magnitude\n  );\n\n  return (\n    <Box sx={{ my: \"16px\", px: \"24px\" }}>\n      <Slider\n        min={MIN_MAGNITUDE}\n        max={MAX_MAGNITUDE}\n        value={[min, max]}\n        valueLabelDisplay=\"auto\"\n        step={0.1}\n        marks={[\n          {\n            value: MIN_MAGNITUDE,\n            label: `< ${MIN_MAGNITUDE}`,\n          },\n          {\n            value: 0,\n            label: \"Magnitude\",\n          },\n          {\n            value: MAX_MAGNITUDE,\n            label: `> ${MAX_MAGNITUDE}`,\n          },\n        ]}\n        onChange={(event, value, index) => {\n          store.update((s) => {\n            if (typeof value === \"number\") {\n              if (index === 0)\n                s.filter.magnitude.min = valueUnless(MIN_MAGNITUDE, value);\n              else s.filter.magnitude.max = valueUnless(MAX_MAGNITUDE, value);\n            } else {\n              s.filter.magnitude.min = valueUnless(MIN_MAGNITUDE, value[0]);\n              s.filter.magnitude.max = valueUnless(MAX_MAGNITUDE, value[1]);\n            }\n          });\n        }}\n      />\n    </Box>\n  );\n}\n\nfunction valueUnless(\n  unless: Magnitude,\n  value: Magnitude\n): Magnitude | undefined {\n  return value === unless ? undefined : value;\n}\n","import { FormControl, TextField } from \"@mui/material\";\n\nimport { StationData, StationCode } from \"../../interfaces\";\nimport { store } from \"../../store\";\n\nexport function StationPrefixFilter() {\n  const stations = store.useState((s) => s.stations);\n  const prefixes = store.useState((s) => s.filter.stations.prefixes);\n\n  return (\n    <FormControl sx={{ m: 1, width: 280 }}>\n      <TextField\n        label=\"Station prefixes\"\n        value={prefixes}\n        onChange={(event) => {\n          const prefixes = event.target.value.toUpperCase();\n          store.update((s) => {\n            s.filter.stations = { prefixes, codes: filter(stations, prefixes) };\n          });\n        }}\n      />\n    </FormControl>\n  );\n}\n\nfunction filter(stations: StationData[], rawPrefixes: string): StationCode[] {\n  rawPrefixes = rawPrefixes.trim();\n  if (rawPrefixes === \"\") return stations.map((s) => s.code);\n\n  const prefixes = rawPrefixes.split(/[^a-zA-Z0-9]+/);\n\n  const filtered = new Set<StationCode>();\n  for (const prefix of prefixes) {\n    for (const station of stations) {\n      if (station.code.startsWith(prefix)) filtered.add(station.code);\n    }\n  }\n\n  return [...filtered];\n}\n","import {\n  FormControl,\n  Stack,\n  Button,\n  InputLabel,\n  Select,\n  SelectChangeEvent,\n  OutlinedInput,\n  MenuItem,\n  Checkbox,\n  ListItemText,\n} from \"@mui/material\";\n\nimport { StationData } from \"../../interfaces\";\nimport { store } from \"../../store\";\n\nexport function StationFilter() {\n  const stations = store.useState((s) => s.stations);\n  const codes = store.useState((s) => s.filter.stations.codes);\n\n  return (\n    <>\n      <FormControl sx={{ m: 1, width: 280 }}>\n        <InputLabel id=\"stations-label\">Stations</InputLabel>\n        <Select\n          labelId=\"stations-label\"\n          multiple\n          value={stations.filter((s) => codes.includes(s.code))}\n          input={<OutlinedInput label=\"Stations\" />}\n          renderValue={(selected) => {\n            if (selected.length === stations.length) return \"(all)\";\n            if (selected.length === 0) return \"(none)\";\n            const ss = [...selected];\n            const codes = ss.map((s) => s.code);\n            return codes.join(\", \");\n          }}\n          onChange={(event: SelectChangeEvent<StationData[]>) => {\n            const { value } = event.target;\n            if (typeof value === \"string\") return;\n            store.update((s) => {\n              s.filter.stations = {\n                codes: value.map((s) => s.code),\n                prefixes: \"\",\n              };\n            });\n          }}\n          MenuProps={MenuProps}\n        >\n          {stations.map((s) => (\n            <MenuItem key={s.code} value={s as any}>\n              <Checkbox checked={codes.includes(s.code)} />\n              <ListItemText>{s.code}</ListItemText>\n            </MenuItem>\n          ))}\n        </Select>\n      </FormControl>\n      <Stack direction=\"row\">\n        <Button\n          onClick={() => {\n            store.update((s) => {\n              s.filter.stations = {\n                codes: stations.map((s) => s.code),\n                prefixes: \"\",\n              };\n            });\n          }}\n        >\n          all\n        </Button>\n        <Button\n          onClick={() => {\n            store.update((s) => {\n              s.filter.stations = {\n                codes: [],\n                prefixes: \"\",\n              };\n            });\n          }}\n        >\n          none\n        </Button>\n      </Stack>\n    </>\n  );\n}\n\nconst ITEM_HEIGHT = 54;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  autoFocus: false, // kludge to stop initial scoll to end\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 6.5 + ITEM_PADDING_TOP,\n      width: 280,\n    },\n  },\n};\n","import { Box, Typography, Toolbar, IconButton } from \"@mui/material\";\nimport ChevronRightRoundedIcon from \"@mui/icons-material/ChevronRightRounded\";\n\nimport { ShowerFilter } from \"./filter/ShowerFilter\";\nimport { MagnitudeFilter } from \"./filter/MagnitudeFilter\";\nimport { StationPrefixFilter } from \"./filter/StationPrefixFilter\";\nimport { StationFilter } from \"./filter/StationFilter\";\n\ninterface Props {\n  onClose: () => void;\n}\n\nexport function Filter(props: Props) {\n  const { onClose } = props;\n\n  return (\n    <Box sx={{ width: 300 }}>\n      <Toolbar sx={{ justifyContent: \"space-between\" }}>\n        <Typography variant=\"h6\">Filter</Typography>\n        <IconButton onClick={onClose}>\n          <ChevronRightRoundedIcon />\n        </IconButton>\n      </Toolbar>\n      <ShowerFilter />\n      <MagnitudeFilter />\n      <StationPrefixFilter />\n      <StationFilter />\n    </Box>\n  );\n}\n","import {\n  Box,\n  Stack,\n  Typography,\n  Toolbar,\n  IconButton,\n  FormControlLabel,\n  Switch,\n} from \"@mui/material\";\nimport ChevronRightRoundedIcon from \"@mui/icons-material/ChevronRightRounded\";\n\nimport { store } from \"../store\";\n\ninterface Props {\n  onClose: () => void;\n}\n\nexport function Settings(props: Props) {\n  const { onClose } = props;\n\n  const { showClouds, light, cityLights, highResolutionTextures } =\n    store.useState((s) => s.settings);\n\n  return (\n    <Box sx={{ width: 300 }}>\n      <Toolbar sx={{ justifyContent: \"space-between\" }}>\n        <Typography variant=\"h6\">Settings</Typography>\n        <IconButton onClick={onClose}>\n          <ChevronRightRoundedIcon />\n        </IconButton>\n      </Toolbar>\n\n      <Stack direction=\"column\" sx={{ px: 2 }}>\n        <FormControlLabel\n          control={\n            <Switch\n              checked={highResolutionTextures}\n              onChange={(event) => {\n                store.update((s) => {\n                  s.settings.highResolutionTextures = event.target.checked;\n                });\n              }}\n            />\n          }\n          label=\"High resolution textures\"\n        />\n        <FormControlLabel\n          control={\n            <Switch\n              checked={showClouds}\n              onChange={(event) => {\n                store.update((s) => {\n                  s.settings.showClouds = event.target.checked;\n                });\n              }}\n            />\n          }\n          label=\"Clouds\"\n        />\n        <FormControlLabel\n          control={\n            <Switch\n              checked={light}\n              onChange={(event) => {\n                store.update((s) => {\n                  s.settings.light = event.target.checked;\n                });\n              }}\n            />\n          }\n          label=\"Light\"\n        />\n        <FormControlLabel\n          control={\n            <Switch\n              checked={cityLights}\n              onChange={(event) => {\n                store.update((s) => {\n                  s.settings.cityLights = event.target.checked;\n                });\n              }}\n            />\n          }\n          label=\"City lights\"\n        />\n      </Stack>\n    </Box>\n  );\n}\n","import { MeteorData } from \"../interfaces\";\nimport { formatDateTime } from \"../format\";\nimport \"./MeteorTooltip.css\";\n\nexport interface MeteorTooltipProps {\n  meteor: MeteorData;\n}\n\nexport function MeteorTooltip(props: MeteorTooltipProps) {\n  const { meteor } = props;\n  const { shower, beginTime, magnitude, duration, stationCodes } = meteor;\n\n  return (\n    <div className=\"meteorTooltip\">\n      <div className=\"showerCode\">{shower.code}</div>\n      <div className=\"beginTime\">{formatDateTime(beginTime)}</div>\n      <div className=\"magnitude\">Mag {magnitude}</div>\n      <div className=\"duration\">{duration}s</div>\n\n      <div className=\"stationCodes\">{stationCodes.join(\", \")}</div>\n    </div>\n  );\n}\n","import { useRef, useState, ReactNode } from \"react\";\nimport {\n  Matrix4,\n  Vector3,\n  Quaternion,\n  InstancedMesh,\n  Color,\n  Object3D,\n  Camera,\n} from \"three\";\nimport { useFrame, useThree } from \"@react-three/fiber\";\nimport { Html } from \"@react-three/drei\";\n\nimport { MeteorData, XYZ } from \"../interfaces\";\nimport { MeteorTooltip } from \"../ui/MeteorTooltip\";\nimport { xyz } from \"./geometry\";\n\nconst MIN_WIDTH = 0.1;\nconst MAG_ZERO_WIDTH = 2;\n\nconst DEFAULT_COLOR = new Color(\"white\");\nconst HIGHLIGHTED_COLOR = new Color(\"goldenrod\");\nconst SELECTED_COLOR = new Color(\"hotpink\");\n\nconst BATCH_SIZE = 1000;\n\nconst ZERO_MATRIX = new Matrix4();\n\nexport interface InstancedMeteorsProps {\n  data: MeteorData[];\n  selectedMeteor?: MeteorData;\n  selectMeteor: (meteor: MeteorData, focus: boolean) => void;\n  filteredMeteors: boolean[];\n}\n\nexport function InstancedMeteors(props: InstancedMeteorsProps) {\n  const { data, selectedMeteor, selectMeteor, filteredMeteors } = props;\n\n  const vertexShader = `\n    varying vec2 vUv;\n    varying vec3 vColor;\n\n    void main() {\n      vUv = uv;\n      vColor = instanceColor;\n      gl_Position = projectionMatrix * modelViewMatrix * instanceMatrix * vec4(position,1.0);\n    }\n  `;\n\n  const fragmentShader = `\n    varying vec2 vUv;\n    varying vec3 vColor;\n\n    void main() {\n      float x = vUv.x;\n      float y = vUv.y;\n      float c = (x < 0.5 ? x : (1.0 - x)) * 2.0;\n      float p = 0.75;\n      float l = y < p ? (y / p) : (1.0 - y) / (1.0 - p);\n      float opacity = c * l;\n      gl_FragColor = vec4(vColor, opacity);\n    }\n  `;\n\n  const ref = useRef<any[]>([]);\n\n  useFrame(({ camera }) => {\n    // console.info(\"frame!\", data.length);\n    const meshes = ref.current;\n    if (meshes) {\n      for (let j = 0; j < meshes.length; ++j) {\n        const mesh = meshes[j];\n        if (mesh) {\n          for (let i = 0; i < BATCH_SIZE; ++i) {\n            const meteor = data[j * BATCH_SIZE + i];\n            if (meteor) {\n              mesh.setMatrixAt(\n                i,\n                filteredMeteors[i]\n                  ? buildMeteorMatrix(meteor, camera.position)\n                  : ZERO_MATRIX\n              );\n              let color = DEFAULT_COLOR;\n              if (meteor === selectedMeteor) color = SELECTED_COLOR;\n              else if (meteor === hover?.meteor) color = HIGHLIGHTED_COLOR;\n              mesh.setColorAt(i, color);\n            } else {\n              mesh.setMatrixAt(i, ZERO_MATRIX);\n            }\n            mesh.instanceMatrix.needsUpdate = true;\n            if (mesh.instanceColor) mesh.instanceColor.needsUpdate = true;\n          }\n        }\n      }\n    }\n  });\n\n  const [hover, setHover] = useState<\n    { batch: number; meteor: MeteorData; instanceId: number } | undefined\n  >(undefined);\n\n  const { invalidate } = useThree();\n\n  const lastFilterMeteorsRef = useRef<boolean[]>([]);\n  if (filteredMeteors !== lastFilterMeteorsRef.current) {\n    lastFilterMeteorsRef.current = filteredMeteors;\n    invalidate();\n  }\n\n  const renderBatch = (batch: number, offset: number) => {\n    return (\n      <instancedMesh\n        key={`batch-${batch}`}\n        ref={(mesh) => {\n          if (ref.current) ref.current[batch] = mesh;\n        }}\n        args={[undefined, undefined, BATCH_SIZE /*data.length*/]}\n        onClick={(e) => {\n          if (e.instanceId !== undefined) {\n            const i = e.instanceId + offset;\n            selectMeteor(data[i], false);\n            invalidate();\n          }\n          e.stopPropagation();\n        }}\n        onDoubleClick={(e) => {\n          if (e.instanceId !== undefined) {\n            const i = e.instanceId + offset;\n            selectMeteor(data[i], true);\n            invalidate();\n          }\n          e.stopPropagation();\n        }}\n        onPointerOver={(e) => {\n          // console.info(\"onPointerOver\", e.instanceId);\n          const { instanceId } = e;\n          if (instanceId !== undefined) {\n            const i = instanceId + offset;\n            const meteor = data[i];\n            setHover({ batch, meteor, instanceId });\n          }\n        }}\n        onPointerOut={(e) => {\n          setHover(undefined);\n        }}\n      >\n        <planeGeometry args={[1, 1]} />\n        <shaderMaterial\n          vertexShader={vertexShader}\n          fragmentShader={fragmentShader}\n          transparent={true}\n          depthWrite={false}\n        />\n\n        {hover && hover.batch === batch && (\n          <Html\n            calculatePosition={(el, camera, size) =>\n              calculateTooltipPosition(el, camera, size, hover?.instanceId)\n            }\n          >\n            <MeteorTooltip meteor={hover.meteor} />\n          </Html>\n        )}\n      </instancedMesh>\n    );\n  };\n\n  const batches: ReactNode[] = [];\n  const n = data.length;\n  const numBatches = Math.ceil(n / BATCH_SIZE);\n  // console.info(\n  //   `[InstanceMeteors] ${n} meteors in ${numBatches} batches of ${BATCH_SIZE}`\n  // );\n  for (let j = 0; j < numBatches; ++j) {\n    batches.push(renderBatch(j, j * BATCH_SIZE));\n  }\n\n  return <>{batches}</>;\n}\n\nconst v1 = new Vector3();\nconst m = new Matrix4();\nfunction calculateTooltipPosition(\n  el: Object3D,\n  camera: Camera,\n  size: { width: number; height: number },\n  index: number | undefined\n) {\n  if (el.parent instanceof InstancedMesh && index !== undefined) {\n    el.parent.getMatrixAt(index, m);\n  } else {\n    // hide tooltip offscreen\n    return [-9999999, -9999999];\n  }\n  const objectPos = v1.setFromMatrixPosition(m);\n  objectPos.project(camera);\n  const widthHalf = size.width / 2;\n  const heightHalf = size.height / 2;\n  return [\n    objectPos.x * widthHalf + widthHalf,\n    -(objectPos.y * heightHalf) + heightHalf,\n  ];\n}\n\nfunction buildMeteorMatrix(\n  meteor: MeteorData,\n  cameraPosition: Vector3\n): Matrix4 {\n  const { begin, end, magnitude } = meteor;\n\n  const brightness = 1 - magnitude * 0.2;\n\n  const tail = xyz(begin);\n  const head = xyz(end);\n\n  const [tx, ty, tz] = tail;\n  const [hx, hy, hz] = head;\n\n  const center: XYZ = [(tx + hx) / 2, (ty + hy) / 2, (tz + hz) / 2];\n  const [cx, cy, cz] = center;\n  const position = new Vector3(cx, cy, cz);\n\n  const vector = new Vector3(\n    head[0] - tail[0],\n    head[1] - tail[1],\n    head[2] - tail[2]\n  );\n  const length = vector.length();\n  const width = Math.max(MIN_WIDTH, MAG_ZERO_WIDTH * brightness);\n  const direction = vector.clone();\n  direction.normalize();\n\n  // build matrix\n\n  const view = position.clone().sub(cameraPosition).normalize();\n  const perp = direction.clone().cross(view).normalize();\n  const up = direction.clone().cross(perp).normalize();\n  const right = direction.clone().cross(up);\n\n  const rotation = new Matrix4();\n  const xAxis = right;\n  const yAxis = direction;\n  const zAxis = up;\n  rotation.makeBasis(xAxis, yAxis, zAxis);\n\n  const quaternion = new Quaternion();\n  quaternion.setFromRotationMatrix(rotation);\n\n  const scale = new Vector3(width, length, 1);\n\n  const m = new Matrix4();\n  m.compose(position, quaternion, scale);\n  return m;\n}\n","import { createRef } from \"react\";\nimport { useThree, useFrame } from \"@react-three/fiber\";\nimport { OrbitControls } from \"@react-three/drei\";\nimport { OrbitControls as OrbitControlsImpl } from \"three-stdlib\";\n\nimport { CameraControlData } from \"../interfaces\";\nimport { DEFAULT_UP } from \"../constants\";\nimport { position, vector3EqualsXYZ } from \"./geometry\";\n\nexport const CAMERA_CONFIG = {\n  fov: 75,\n  near: 10,\n  far: 100000,\n  position: position(50.22, -4.95, 1500),\n};\n\nexport interface CameraControlsProps extends CameraControlData {}\n\nexport function CameraControls(props: CameraControlsProps) {\n  const { up } = props;\n\n  // console.info(\"[CameraControls]\", up);\n\n  const ref = createRef<OrbitControlsImpl>();\n\n  const state = useThree();\n  useFrame(() => {\n    const [x, y, z] = up;\n    const { camera } = state;\n    if (!vector3EqualsXYZ(camera.up, up)) {\n      if (up === DEFAULT_UP && ref.current) {\n        ref.current.reset();\n      }\n\n      camera.up.set(x, y, z);\n      camera.updateProjectionMatrix();\n    }\n  });\n\n  return (\n    <OrbitControls ref={ref} {...props} zoomSpeed={0.1} rotateSpeed={0.1} />\n  );\n}\n","import { Canvas } from \"@react-three/fiber\";\nimport { useTexture } from \"@react-three/drei\";\n\nimport { MeteorData, SettingsData, CameraControlData } from \"../interfaces\";\nimport {\n  EARTH_RADIUS,\n  DEFAULT_CAMERA_CONTROL,\n  CLOUD_HEIGHT,\n  CITY_LIGHTS_COLOR,\n  AMBIENT_LIGHT_INTENSITY,\n  BLACK,\n} from \"../constants\";\n\nimport { position } from \"./geometry\";\n\nimport { /*Marker, */ MarkerProps } from \"./Marker\";\nimport { InstancedMeteors } from \"./InstancedMeteors\";\nimport { CameraControls, CAMERA_CONFIG } from \"./CameraControls\";\n\nimport \"./Globe.css\";\n\nexport interface GlobeProps {\n  markers: MarkerProps[];\n  meteors: MeteorData[];\n  selectedMeteor?: MeteorData;\n  selectMeteor: (meteor: MeteorData, focus: boolean) => void;\n  filteredMeteors: boolean[];\n  settings: SettingsData;\n  cameraControl: CameraControlData;\n  setCameraControl: (cameraControl: CameraControlData) => void;\n}\n\nexport function Globe(props: GlobeProps) {\n  const {\n    /*markers,*/ meteors,\n    selectedMeteor,\n    selectMeteor,\n    filteredMeteors,\n    settings,\n    cameraControl,\n    setCameraControl,\n  } = props;\n\n  const material = useTexture(chooseTextures(settings));\n  const clouds = useTexture({\n    map: \"/meteor-globe/textures/fair_clouds_4k.jpeg\",\n  });\n  return (\n    <Canvas className=\"globeCanvas\" frameloop=\"demand\" camera={CAMERA_CONFIG}>\n      <CameraControls {...cameraControl} />\n      <ambientLight intensity={AMBIENT_LIGHT_INTENSITY} />\n      <directionalLight\n        color=\"white\"\n        position={position(0, 0, 1)}\n        visible={settings.light}\n      />\n      <mesh\n        onDoubleClick={() => {\n          setCameraControl(DEFAULT_CAMERA_CONTROL);\n        }}\n      >\n        <sphereGeometry args={[EARTH_RADIUS, 128, 128]} />\n        <meshPhongMaterial\n          {...material}\n          emissive={\n            settings.light || !settings.cityLights ? BLACK : CITY_LIGHTS_COLOR\n          }\n        />\n      </mesh>\n      <mesh visible={settings.showClouds}>\n        <sphereGeometry args={[EARTH_RADIUS + CLOUD_HEIGHT, 128, 128]} />\n        <meshBasicMaterial color={0xffffff} alphaMap={clouds.map} transparent />\n      </mesh>\n      {/*      {markers.map((m) => (\n        <Marker key={`marker-${m.identifier}`} {...m} />\n      ))}\n*/}\n      <InstancedMeteors\n        data={meteors}\n        selectedMeteor={selectedMeteor}\n        selectMeteor={selectMeteor}\n        filteredMeteors={filteredMeteors}\n      />\n    </Canvas>\n  );\n}\n\nfunction chooseTextures(settings: SettingsData): {\n  [k: string]: string;\n} {\n  const { highResolutionTextures } = settings;\n  const textures: any = {\n    map: `/meteor-globe/textures/2_no_clouds_${\n      highResolutionTextures ? \"8k\" : \"4k\"\n    }.jpeg`,\n    bumpMap: \"/meteor-globe/textures/elev_bump_4k.jpeg\",\n    specularMap: \"/meteor-globe/textures/water_4k.png\",\n    emissiveMap: \"/meteor-globe/textures/5_night_4k.jpeg\",\n  };\n\n  return textures;\n}\n","import { useEffect, useState, useCallback } from \"react\";\n\nimport {\n  AppBar,\n  Toolbar,\n  Typography,\n  Box,\n  Link,\n  IconButton,\n  Alert,\n  Snackbar,\n  Drawer,\n  Tooltip,\n} from \"@mui/material\";\n\nimport MenuRoundedIcon from \"@mui/icons-material/MenuRounded\";\nimport SearchRoundedIcon from \"@mui/icons-material/SearchRounded\";\nimport SettingsRoundedIcon from \"@mui/icons-material/SettingsRounded\";\n\nimport { LocalizationProvider } from \"@mui/lab\";\nimport DateAdapter from \"@mui/lab/AdapterLuxon\";\n\nimport Div100vh from \"react-div-100vh\";\nimport { Settings as LuxonSettings } from \"luxon\";\n\nimport { initCameras } from \"./data/cameras\";\nimport {\n  meteorDataInfoFromParams,\n  loadMeteors,\n  filterMeteors,\n} from \"./data/meteors\";\n\nimport { AppMenu } from \"./ui/AppMenu\";\nimport { MeteorInfo } from \"./ui/MeteorInfo\";\nimport { LoadDailyMeteorsDialog } from \"./ui/LoadDailyMeteorsDialog\";\nimport { Filter } from \"./ui/Filter\";\nimport { Settings } from \"./ui/Settings\";\n\nimport { Globe } from \"./3d/Globe\";\nimport { xyz, localUp } from \"./3d/geometry\";\n\nimport { MeteorDataInfo, MeteorData, CameraControlData } from \"./interfaces\";\nimport { store } from \"./store\";\nimport { useGMN } from \"./GMNProvider\";\nimport { saveSettings } from \"./settings\";\nimport { DEFAULT_CAMERA_CONTROL } from \"./constants\";\n\nimport \"./App.css\";\n\nLuxonSettings.defaultZone = \"UTC\";\n\nconst queryParams = new URLSearchParams(window.location.search);\nexport const formatter = new Intl.NumberFormat();\n\nexport default function App() {\n  const [error, setError] = useState<string | undefined>();\n\n  const cameraControl = store.useState((s) => s.cameraControl);\n  const setCameraControl = useCallback((cameraControl: CameraControlData) => {\n    store.update((s) => {\n      s.cameraControl = cameraControl;\n    });\n  }, []);\n  const resetView = useCallback(() => {\n    setCameraControl(DEFAULT_CAMERA_CONTROL);\n  }, [setCameraControl]);\n\n  const markers = store.useState((s) => s.markers);\n  const meteors = store.useState((s) => s.meteors);\n  const selectedMeteor = store.useState((s) => s.selectedMeteor);\n  const selectMeteor = (m: MeteorData, focus: boolean) => {\n    console.info(\"SELECT\", m);\n    store.update((s) => {\n      s.selectedMeteor = m;\n      if (focus) s.cameraControl = focusedMeteorCameraControl(m);\n    });\n  };\n  const focusedMeteorCameraControl = (m: MeteorData) => {\n    const { latitude, longitude } = m.end;\n    return {\n      minDistance: 100,\n      maxDistance: 10000,\n      target: xyz(m.end),\n      up: localUp(latitude, longitude),\n    };\n  };\n  const focusMeteor = (m: MeteorData) => {\n    console.info(\"FOCUS\", m);\n    store.update((s) => {\n      s.cameraControl = focusedMeteorCameraControl(m);\n    });\n  };\n\n  const filter = store.useState((s) => s.filter);\n\n  useEffect(initCameras, []);\n\n  const { gmn } = useGMN();\n\n  const tryLoadMeteors = useCallback(\n    (info: MeteorDataInfo) => {\n      loadMeteors(info)\n        .then(() => {\n          resetView();\n        })\n        .catch((e) => {\n          console.error(\"loading\", info, e);\n          setError(`Failed to load ${info.title}`);\n        });\n    },\n    [resetView]\n  );\n\n  useEffect(() => {\n    tryLoadMeteors(meteorDataInfoFromParams(queryParams));\n  }, [tryLoadMeteors]);\n\n  const [filterVisible, setFilterVisible] = useState(false);\n  const meteorVisibility = filterMeteors(filter, meteors);\n\n  const [settingsVisible, setSettingsVisible] = useState(false);\n  const settings = store.useState((s) => s.settings);\n  store.subscribe((s) => s.settings, saveSettings);\n\n  const Header = () => {\n    const loading = store.useState((s) => s.loading);\n    const title = store.useState((s) => s.meteorDataInfo.title);\n    const numMeteors = store.useState((s) => s.meteors.length);\n    const numVisibleMeteors = meteorVisibility.filter((v) => v).length;\n    const [menuVisible, setMenuVisible] = useState(false);\n    const [menuAnchorEl, setMenuAnchorEl] = useState<HTMLElement | null>(null);\n    const [loadDailyMeteorsDialogOpen, setLoadDailyMeteorsDialogOpen] =\n      useState(false);\n\n    const titleSuffix = () => {\n      const n = formatter.format(numMeteors);\n      if (numMeteors === numVisibleMeteors) {\n        switch (numMeteors) {\n          case 1:\n            return \"1 meteor\";\n          default:\n            return `${n} meteors`;\n        }\n      }\n      const v = formatter.format(numVisibleMeteors);\n      switch (numMeteors) {\n        case 1:\n          return \"0 of 1 meteor\";\n        default:\n          return `${v} of ${n} meteors`;\n      }\n    };\n\n    return (\n      <>\n        <AppBar color=\"transparent\" sx={{ boxShadow: \"none\" }}>\n          <Toolbar sx={{ justifyContent: \"space-between\" }}>\n            <Box\n              sx={{\n                display: \"flex\",\n                justifyContent: \"flex-start\",\n                flexGrow: 1,\n              }}\n            >\n              <IconButton\n                onClick={(event) => {\n                  setMenuVisible(!menuVisible);\n                  setMenuAnchorEl(event.currentTarget);\n                }}\n              >\n                <MenuRoundedIcon />\n              </IconButton>\n              <Typography variant=\"h5\" sx={{ flexGrow: 1 }}>\n                {loading && `Loading ${title}...`}\n                {!loading && `${title} — ${titleSuffix()}`}\n              </Typography>\n            </Box>\n            <Tooltip title=\"Filter visible meteors\">\n              <IconButton\n                onClick={(event) => {\n                  setFilterVisible(!filterVisible);\n                }}\n              >\n                <SearchRoundedIcon />\n              </IconButton>\n            </Tooltip>\n          </Toolbar>\n        </AppBar>\n        <AppMenu\n          open={menuVisible}\n          onClose={() => setMenuVisible(false)}\n          anchorEl={menuAnchorEl}\n          onLoadMeteors={(info: MeteorDataInfo) => {\n            tryLoadMeteors(info);\n            setMenuVisible(false);\n          }}\n          showLoadDailyDialog={() => {\n            setLoadDailyMeteorsDialogOpen(true);\n            setMenuVisible(false);\n          }}\n          resetView={() => {\n            resetView();\n            setMenuVisible(false);\n          }}\n        />\n        <LoadDailyMeteorsDialog\n          open={loadDailyMeteorsDialogOpen}\n          onClose={() => setLoadDailyMeteorsDialogOpen(false)}\n          onLoadMeteors={(date) => {\n            const info = gmn.dailyMeteorsInfo(date);\n            console.info(info);\n            tryLoadMeteors(info);\n            setLoadDailyMeteorsDialogOpen(false);\n          }}\n        />\n      </>\n    );\n  };\n\n  return (\n    <>\n      <LocalizationProvider dateAdapter={DateAdapter}>\n        <Snackbar open={error !== undefined}>\n          <Alert severity=\"error\" onClose={() => setError(undefined)}>\n            {error}\n          </Alert>\n        </Snackbar>\n        <Div100vh style={{ display: \"flex\", flexFlow: \"column\" }}>\n          <Header />\n          <Box sx={{ flex: \"1 1 auto\" }}>\n            <Globe\n              markers={[...markers.values()]}\n              meteors={meteors}\n              filteredMeteors={meteorVisibility}\n              selectedMeteor={selectedMeteor}\n              selectMeteor={selectMeteor}\n              settings={settings}\n              cameraControl={cameraControl}\n              setCameraControl={setCameraControl}\n            />\n            {selectedMeteor && (\n              <MeteorInfo\n                meteor={selectedMeteor}\n                focusMeteor={() => {\n                  focusMeteor(selectedMeteor);\n                }}\n              />\n            )}\n          </Box>\n          <Box sx={{ position: \"absolute\", right: 24, bottom: 0 }}>\n            <Tooltip title=\"App settings\">\n              <IconButton\n                onClick={(event) => {\n                  setSettingsVisible(true);\n                }}\n              >\n                <SettingsRoundedIcon />\n              </IconButton>\n            </Tooltip>\n          </Box>\n          <Footer />\n          <Drawer\n            anchor=\"right\"\n            open={filterVisible}\n            onClose={() => {\n              setFilterVisible(false);\n            }}\n            variant=\"persistent\"\n          >\n            <Filter\n              onClose={() => {\n                setFilterVisible(false);\n              }}\n            />\n          </Drawer>\n          <Drawer\n            anchor=\"right\"\n            open={settingsVisible}\n            onClose={() => {\n              setSettingsVisible(false);\n            }}\n          >\n            <Settings\n              onClose={() => {\n                setSettingsVisible(false);\n              }}\n            />\n          </Drawer>\n        </Div100vh>\n      </LocalizationProvider>\n    </>\n  );\n}\n\nfunction Footer() {\n  return (\n    <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\">\n      {\"Copyright © \"}\n      {new Date().getFullYear()}{\" \"}\n      <Link\n        color=\"inherit\"\n        href=\"https://github.com/robagar/meteor-globe\"\n        target=\"_blank\"\n        rel=\"noopener\"\n      >\n        Rob Agar\n      </Link>\n      {\" (UK003C) \"}\n      {\" — \"}\n      {\"Meteor data from the \"}\n      <Link\n        color=\"inherit\"\n        href=\"https://globalmeteornetwork.org/\"\n        target=\"_blank\"\n        rel=\"noopener\"\n      >\n        Global Meteor Network\n      </Link>\n    </Typography>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport CssBaseline from \"@mui/material/CssBaseline\";\nimport { ThemeProvider } from \"@mui/material/styles\";\n\nimport \"@fontsource/roboto\";\n\nimport theme from \"./theme\";\n\nimport \"./index.css\";\nimport App from \"./App\";\nimport { GMNProvider } from \"./GMNProvider\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <React.Suspense fallback={<div>Loading... </div>}>\n        <GMNProvider>\n          <App />\n        </GMNProvider>\n      </React.Suspense>\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}